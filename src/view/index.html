<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Find Your Star - AR View</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #hud {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            pointer-events: none;
        }

        #hud>* {
            pointer-events: auto;
        }

        #guidance {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }

        #starInfo {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }
    </style>
</head>

<body class="bg-slate-950">
    <!-- HUD Overlay -->
    <div id="hud" class="p-4">
        <div class="bg-slate-900/80 backdrop-blur-sm rounded-xl p-4 max-w-sm mx-auto border border-indigo-500/30">
            <h1 id="starName" class="text-xl font-bold text-white text-center">Loading...</h1>
            <p id="coordinates" class="text-sm text-slate-400 text-center mt-1">--</p>
        </div>
    </div>

    <!-- Guidance Arrow -->
    <div id="guidance" class="text-center">
        <div id="arrow" class="text-6xl transition-transform duration-200">↑</div>
        <p id="direction" class="text-white text-sm mt-2">Point camera at the sky</p>
    </div>

    <!-- Star Info -->
    <div id="starInfo" class="bg-slate-900/80 backdrop-blur-sm rounded-xl px-6 py-3 border border-indigo-500/30">
        <p class="text-indigo-300 text-sm">
            <span id="altDisplay">Alt: --°</span> · <span id="azDisplay">Az: --°</span>
        </p>
    </div>

    <!-- A-Frame Scene -->
    <a-scene embedded vr-mode-ui="enabled: false" renderer="antialias: true">
        <a-sky color="#050511"></a-sky>

        <!-- Star Entity (will be positioned by JS) -->
        <a-entity id="starEntity" visible="false">
            <a-sphere radius="0.1" color="#fbbf24" material="emissive: #fbbf24; emissiveIntensity: 2">
                <a-animation attribute="scale" from="1 1 1" to="1.3 1.3 1.3" dur="1000" direction="alternate"
                    repeat="indefinite"></a-animation>
            </a-sphere>
            <a-text id="starLabel" value="" align="center" position="0 0.3 0" scale="0.5 0.5 0.5"
                color="#ffffff"></a-text>
        </a-entity>

        <a-camera id="camera" look-controls="enabled: true" wasd-controls="enabled: false"></a-camera>
    </a-scene>

    <script type="module" src="./ar-viewer.js"></script>
</body>

</html>